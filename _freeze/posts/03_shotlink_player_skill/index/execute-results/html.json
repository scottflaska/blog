{
  "hash": "71b5db172c0755738b37f9d10f03f157",
  "result": {
    "markdown": "---\ntitle: \"Estimating Golfer Skill with Shot-Level Data\"\nauthor: \"Scott Flaska\"\ndate: \"2023-04-10\"\ndraft: true\ncategories: [shotlink, golf, r]\nimage: \"\"\nformat: html\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nshot_level <- readRDS(\"../02_shotlink_explore/shot_level.rds\")\ncut_colors <- readRDS(\"../02_shotlink_explore/cut_colors.rds\")\n\nshot_level %>% \n  filter(player_last_name == 'Haas') %>% \n  select(player) %>% \n  distinct()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  player\n1  24924\n```\n:::\n\n```{.r .cell-code}\nstrokes_remaining <- shot_level %>% \n  group_by(player,\n           hole,\n           round) %>% \n  arrange(player,\n          round,\n          hole,\n          shot) %>% \n  mutate(strokes_rolling = cumsum(num_of_strokes)) %>% \n  mutate(strokes_remaining = hole_score - strokes_rolling + 1) %>%\n  ungroup()\n\nstrokes_remaining %>% \n  filter(player == 21731,\n         round == 1,\n         hole %in% 1) %>% \n  select(hole,\n         hole_score,\n         shot,\n         num_of_strokes,\n         strokes_remaining)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 5\n   hole hole_score  shot num_of_strokes strokes_remaining\n  <int>      <int> <int>          <int>             <dbl>\n1     1          4     1              1                 4\n2     1          4     2              1                 3\n3     1          4     3              1                 2\n4     1          4     4              1                 1\n```\n:::\n\n```{.r .cell-code}\nstrokes_remaining %>% \n  filter(player_last_name == 'Mahan')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 272 × 41\n   tour_code tour_de…¹  year tourn…² player course perma…³ playe…⁴ playe…⁵ round\n   <chr>     <chr>     <int>   <int>  <int>  <int>   <int> <chr>   <chr>   <int>\n 1 R         PGA TOUR   2011     410  24781    688      60 Hunter  Mahan       1\n 2 R         PGA TOUR   2011     410  24781    688      60 Hunter  Mahan       1\n 3 R         PGA TOUR   2011     410  24781    688      60 Hunter  Mahan       1\n 4 R         PGA TOUR   2011     410  24781    688      60 Hunter  Mahan       1\n 5 R         PGA TOUR   2011     410  24781    688      60 Hunter  Mahan       1\n 6 R         PGA TOUR   2011     410  24781    688      60 Hunter  Mahan       1\n 7 R         PGA TOUR   2011     410  24781    688      60 Hunter  Mahan       1\n 8 R         PGA TOUR   2011     410  24781    688      60 Hunter  Mahan       1\n 9 R         PGA TOUR   2011     410  24781    688      60 Hunter  Mahan       1\n10 R         PGA TOUR   2011     410  24781    688      60 Hunter  Mahan       1\n# … with 262 more rows, 31 more variables: tournament_name <chr>,\n#   course_name <chr>, hole <int>, hole_score <int>, par_value <int>,\n#   yardage <int>, shot <int>, shot_type_s_p_d <chr>, num_of_strokes <int>,\n#   from_location_scorer <chr>, from_location_laser <chr>,\n#   to_location_scorer <chr>, to_location_laser <chr>, distance <int>,\n#   distance_to_pin <int>, in_the_hole_flag <chr>, around_the_green_flag <chr>,\n#   first_putt_flag <chr>, distance_to_hole_after_the_shot <int>, time <int>, …\n```\n:::\n\n```{.r .cell-code}\nstrokes_remaining %>% \n  filter(player %in% c(24925, 24924, 24781)) %>%\n  ggplot(mapping = aes(x = log(distance_to_pin),\n                       y = strokes_remaining,\n                       color = player_last_name)) +\n  geom_jitter(height = 0.1,\n              width = 0) +\n  geom_smooth(method = loess,\n              se = F)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\nstrokes_remaining %>% \n  ggplot(mapping = aes(x = strokes_remaining,\n                       y = distance_to_pin/36 )) +\n  ggbeeswarm::geom_quasirandom() \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-2.png){width=672}\n:::\n\n```{.r .cell-code}\nstrokes_remaining %>% \n  ggplot(mapping = aes(x = distance_to_pin,\n                       y = distance_to_hole_after_the_shot)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-3.png){width=672}\n:::\n\n```{.r .cell-code}\nstrokes_remaining %>% \n  filter(player == 24924) %>% \n  mutate(yards_to_pin = distance_to_pin/36) %>%\n  mutate(log_yards_to_pin = log(yards_to_pin)) %>% \n  filter(log_yards_to_pin > 1) %>% \n  # arrange(yards_to_pin) %>% \n  # select(distance_to_pin, yards_to_pin) %>% \n  # tail()\n  ggplot(mapping = aes(x = yards_to_pin,\n                       y = strokes_remaining)) +\n  geom_jitter(height = 0.1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-4.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}